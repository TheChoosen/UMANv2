{% extends "BIQ/base.html" %}

{% block title %}Accueil - Alliance BIQ{% endblock %}

{% block meta_description %}
L'Alliance Canadienne des Whitehats BIQ lutte pour la protection de la jeunesse au Québec. Découvrez nos projets, déposez un signalement et rejoignez notre mission pour la justice et la transparence.
{% endblock %}

{% block additional_head %}
<style>
/* Enhanced glassmorphism effects for homepage */
.hero-section {
    min-height: 90vh;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 69, 244, 0.1));
    position: relative;
    overflow: hidden;
}

.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 69, 244, 0.2) 0%, transparent 50%);
    pointer-events: none;
}

.section-separator {
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.5), transparent);
    margin: 3rem 0;
    border-radius: 1px;
}
</style>
{% endblock %}

{% block biq_page %}
<main>
    <!-- Hero Section -->
    {% include 'BIQ/components/hero.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Gallery Section -->
    {% include 'BIQ/components/gallery.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Mission & Projects Section -->
    {% include 'BIQ/components/mission.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Press Release Section -->
    {% include 'BIQ/components/press_release.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Projects Section -->
    {% include 'BIQ/components/projects.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Problems & Solutions Section -->
    {% include 'BIQ/components/problems_solutions.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Whitehats Economy Section -->
    {% include 'BIQ/components/whitehats_economy.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Mobilization Section -->
    {% include 'BIQ/components/mobilization.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Parallel Program Section -->
    {% include 'BIQ/components/parallel_program.html' %}
    
    <!-- Section separator -->
    <div class="section-separator"></div>
    
    <!-- Final Call-to-Action -->
    {% include 'BIQ/components/cta_final.html' %}
</main>
{% endblock %}

{% block additional_scripts %}
<script>
// Enhanced smooth scrolling for navigation
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Progressive loading for images
const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const img = entry.target;
            if (img.dataset.src) {
                img.src = img.dataset.src;
                img.classList.remove('lazy');
                observer.unobserve(img);
            }
        }
    });
});

document.querySelectorAll('img[data-src]').forEach(img => {
    imageObserver.observe(img);
});

// Enhanced glass effect animation on scroll
let ticking = false;

function updateGlassEffects() {
    const scrolled = window.pageYOffset;
    const rate = scrolled * -0.5;
    
    document.querySelectorAll('.glass').forEach(element => {
        if (element.getBoundingClientRect().top < window.innerHeight) {
            element.style.transform = `translateY(${rate}px)`;
        }
    });
    
    ticking = false;
}

function requestTick() {
    if (!ticking) {
        requestAnimationFrame(updateGlassEffects);
        ticking = true;
    }
}

window.addEventListener('scroll', requestTick);

// Initialize tooltips and popovers
document.addEventListener('DOMContentLoaded', function() {
    // Bootstrap tooltips
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Bootstrap popovers
    const popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
    popoverTriggerList.map(function (popoverTriggerEl) {
        return new bootstrap.Popover(popoverTriggerEl);
    });
});
</script>
{% endblock %}

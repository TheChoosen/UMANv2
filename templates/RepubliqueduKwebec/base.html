<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Re-Publique Kw√©bec{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Project CSS (static folder) -->
    <link rel="stylesheet" href="/static/RepubliqueduKwebec/rdkq.css" />
    <link rel="stylesheet" href="/static/RepubliqueduKwebec/glass.css">

    <style>
        /* Make inline modal-trigger link buttons white and bold */
        .btn-link {
            color: #ffffff !important;
            font-weight: 700 !important;
            text-decoration: none !important;
        }

        .btn-link:hover,
        .btn-link:focus {
            color: #ffffff !important;
            text-decoration: underline !important;
        }

        /* Ensure muted text appears white on the dark theme */
        .text-muted {
            color: rgba(255, 255, 255, 0.65) !important;
        }

        /* Links inside muted text should be readable */
        .text-muted a {
            color: rgba(255, 255, 255, 0.9) !important;
            text-decoration: underline;
        }
    </style>

    {% block head %}{% endblock %}
</head>

<body>
    <div class="content-wrapper">

        <!-- Enhanced Navigation Bar -->
        <nav class="navbar navbar-expand-lg fixed-top glass--pro">
            <div class="container-fluid d-flex justify-content-between align-items-center px-4">
                <!-- Brand Logo -->
                <div class="navbar-brand-wrapper">
                    <a class="navbar-brand" href="/">
                        <img src="/static/RepubliqueduKwebec/Photo/Association.png" alt="UMan API"
                            style="height: 42px; margin-right: 12px; filter: drop-shadow(0 2px 8px rgba(0, 230, 195, 0.4));">
                        <span class="text-gradient" style="font-weight: 900; font-size: 1.5rem; letter-spacing: 1.5px;">
                            Re-Publique Kw√©bec
                        </span>
                    </a>
                </div>

                <!-- Navigation Buttons (imported component) -->
                <!-- Navigation Buttons -->
                {% import 'components/_modal.html' as modal %}
                <div class="nav-buttons-wrapper" style="display: flex; gap: 16px; align-items: center;">
                    <a href="/rdkq" class="btn btn-glass">
                        <i class="fas fa-home mr-2"></i>Accueil
                    </a>
                    <a href="/rdkq/profil" class="btn btn-glass">
                        <i class="fas fa-user mr-2"></i>Mon Profil
                    </a>
                    {% if session.get('user_id') and session.get('is_admin') %}
                    <a href="/rdkq/admin/mediatheque" class="btn btn-glass d-none">
                        <i class="fas fa-photo-video mr-2"></i>M√©diath√®que Admin
                    </a>
                    <a href="/rdkq/admin" class="btn btn-glass">
                        <i class="fas fa-cog mr-2"></i>Admin
                    </a>
                    {% endif %}
                    {% if session.get('user_id') %}
                    <a href="/rdkq/logout" class="btn btn-glass">
                        <i class="fas fa-sign-out-alt mr-2"></i>D√©connexion
                    </a>
                    {% else %}
                    <a href="/rdkq/login" class="btn btn-glass">
                        <i class="fas fa-sign-in-alt mr-2"></i>Connexion
                    </a>
                    {% endif %}
                </div>

            </div>
        </nav>

        {% block content %}{% endblock %}
    </div>


    <div class="modal fade" id="mediathequeModal" tabindex="-1" aria-labelledby="mediathequeModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content"
                style="background: rgba(26, 26, 46, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1);">
                <div class="modal-header border-bottom border-secondary">
                    <h5 class="modal-title text-white" id="mediathequeModalLabel">
                        <i class="fas fa-photo-video me-2"></i>M√©diath√®que RDKQ
                    </h5>
                    <h5 class="modal-title" id="manifesteModalLabel">Manifeste</h5>
                    <h5 class="modal-title" id="manifesteModalLabel">Manifeste</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Fermer"></button>
                </div>
                <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                    <div id="mediatheque-list" class="row">
                        <!-- Les m√©dias seront charg√©s ici par JavaScript -->
                    </div>
                </div>
                <div class="modal-footer border-top border-secondary">
                    <small class="text-muted me-auto">Cliquez sur "Voir" pour acc√©der au contenu complet</small>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal Participer -->
    <div class="modal fade" id="participerModal" tabindex="-1" aria-labelledby="participerModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="participerModalLabel">Participer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <form id="form-participer" enctype="multipart/form-data" class="card card-body">
                        <div class="form-group">
                            <label for="nom">Nom</label>
                            <input type="text" class="form-control" id="nom" name="nom" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="sujet">Sujet ou proposition</label>
                            <input type="text" class="form-control" id="sujet" name="sujet" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea class="form-control" id="message" name="message" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="fichier">Pi√®ce jointe (optionnel)</label>
                            <input type="file" class="form-control-file" id="fichier" name="fichier">
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="rgpd" name="rgpd" required>
                            <label class="form-check-label" for="rgpd">J'accepte la politique de confidentialit√©
                                (RGPD)</label>
                        </div>
                        <button type="submit" class="btn btn-primary">Envoyer</button>
                        <div id="resultat-form" class="mt-3"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Registre Foncier -->
    <div class="modal fade" id="registreFoncierModal" tabindex="-1" aria-labelledby="registreFoncierModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="registreFoncierModalLabel">Registre Foncier ‚Äî Re-Publique Kw√©bec</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <strong>Notice :</strong> Juridiction Common Law Re-Publique Kw√©bec.
                    </div>
                    <div class="card card-body mb-3">
                        <p>Seul registre autoris√© √† l'enregistrement des biens immobiliers de nos souverains par droit
                            d'association. Nos
                            chartes des honoraires s'appliquent √† tous autre registre, organisme, compagnie ou
                            individus, entit√©s, etc., non
                            autoris√©s par contrat d√ªment rempli et sign√©/autographi√©.</p>

                        <p><strong>Notice :</strong> Soyez √©galement inform√© que les d√©finitions du <em>Black's Law Dictionary</em> sont nulles et non avenues, √©tant un stratag√®me de fraude et de manipulation du peuple UN. Les d√©finitions des mots que nous utilisons sont celles du dictionnaire Larousse.</p>

                        <h3>Prot√©gez vos biens, affirmez votre souverainet√©</h3>
                        <p>√Ä la R√©-publique Kw√©bec, nous croyons en la protection inali√©nable des droits de propri√©t√© de
                            chaque citoyen.
                            Le Registre Foncier Re-Publique Kw√©bec a √©t√© cr√©√© pour garantir que chaque membre puisse
                            revendiquer, s√©curiser
                            et prot√©ger ses terres et propri√©t√©s en dehors des syst√®mes corporatifs traditionnels. Ce
                            registre, ancr√© dans
                            les principes de la Common Law, permet une gestion et une reconnaissance des biens dans le
                            respect des droits
                            naturels de chacun.</p>

                        <h4>Un registre en pleine croissance</h4>
                        <p>D√©j√† plus de <strong>200 √©difices</strong> enregistr√©s ! Depuis le 1er janvier 2024, plus de 200 √©difices ont √©t√© inscrits dans le Registre Foncier Re-Publique Kw√©bec. Ce succ√®s t√©moigne de l'engagement des souverains envers une v√©ritable souverainet√© patrimoniale et une s√©curit√© renforc√©e de leurs propri√©t√©s. Pour prouver notre transparence, nous avons √©galement s√©lectionn√© un immeuble embl√©matique de la R√©publique qui sera visible publiquement sur notre site. Cet √©difice servira d'exemple concret pour vous montrer le processus d‚Äôenregistrement, la s√©curit√© offerte et l‚Äôimportance de ce registre.</p>

                        <h4>Pourquoi un registre foncier ind√©pendant ?</h4>
                        <p>L‚Äôobjectif du Registre Foncier Re-Publique Kw√©bec est d‚Äôassurer √† chaque individu une
                            autonomie patrimoniale et
                            une s√©curit√© juridique. Contrairement aux syst√®mes fonciers classiques souvent soumis aux
                            cr√©ances des
                            institutions financi√®res, notre registre a pour objectif de prot√©ger les actifs de nos souverains de toute saisie non souhait√©e et de les g√©rer librement dans le respect des valeurs de souverainet√© et d‚Äôint√©grit√©.</p>

                        <h4>Avantages</h4>
                        <ul>
                            <li>Reconnaissance des droits de propri√©t√© : Inscrivez vos biens pour b√©n√©ficier d‚Äôune
                                reconnaissance formelle
                                et l√©gitime.</li>
                            <li>S√©curit√© patrimoniale : √âvitez les hypoth√®ques et saisies par des entit√©s externes.</li>
                            <li>Souverainet√© individuelle : Assurez-vous que vos terres et propri√©t√©s sont prot√©g√©es par
                                des lois qui
                                respectent vos droits fondamentaux.</li>
                            <li>Transparence garantie : affichage public de certains √©difices inscrits.</li>
                        </ul>

                        <h4>Comment s‚Äôinscrire ?</h4>
                        <p>Nous offrons une d√©marche simple et s√©curis√©e pour enregistrer vos biens dans votre registre
                            foncier. Pour en
                            savoir plus sur les √©tapes d‚Äôinscription et les documents n√©cessaires, contactez vos
                            conseillers ou utilisez le
                            formulaire de participation ci‚Äëdessous.</p>

                        <p class="mt-3"><a href="rdkq/register" class="btn btn-primary">S'inscrire au Registre Foncier</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Smart Contracts -->
    <div class="modal fade" id="smartContractModal" tabindex="-1" aria-labelledby="smartContractModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="smartContractModalLabel">Exemple : ¬´Smart Contract¬ª dans la Re-Publique
                        Kw√©bec</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <div class="card card-body mb-3">
                        <p>Imaginons que la Banque du Peuple de la Re-Publique Kw√©bec mette en place un syst√®me de
                            soutien aux cr√©ateurs de contenu citoyen (documentaires, tribunaux populaires, formations en
                            sociocratie, etc.).</p>

                        <p>Un ¬´Smart Contract¬ª pourrait √™tre programm√© ainsi :</p>

                        <ol>
                            <li>Un souverain s‚Äôabonne √† un cr√©ateur avec la Monnaie Souveraine.</li>
                            <li>D√®s que le paiement est confirm√©, le ¬´Smart Contract¬ª :</li>
                            <ul>
                                <li>transf√®re 80 % au cr√©ateur,</li>
                                <li>alloue 15 % √† l‚Äôinfrastructure de la plateforme,</li>
                                <li>et r√©serve 5 % dans un fonds communautaire (ex. formation, s√©curit√©, projets
                                    sociaux).</li>
                            </ul>
                            <li>Si le cr√©ateur publie r√©guli√®rement (selon les crit√®res √©tablis par la communaut√©), le
                                ¬´Smart Contract¬ª d√©clenche automatiquement une prime d‚Äôengagement.</li>
                        </ol>

                        <p><strong>Personne n‚Äôa besoin d‚Äôinterm√©diaire</strong> (banque, administrateur ou compagnie).
                            Tout est automatis√©, transparent et v√©rifiable par la communaut√©.</p>

                        <h6>Pourquoi c‚Äôest puissant dans ton contexte ?</h6>
                        <p>√áa refl√®te la CyberSociocratie : les r√®gles sont d√©cid√©es collectivement et ex√©cut√©es
                            automatiquement.</p>
                        <p>√áa soutient la Banque du Peuple et la Monnaie Souveraine.</p>
                        <p>√áa garantit que chaque don, abonnement ou participation citoyenne est juste, tra√ßable et
                            s√©curis√©.</p>

                        <p class="mt-3"><strong>En une phrase :</strong><br>
                            Dans la Re-Publique Kw√©bec, un ¬´Smart Contract¬ª, c‚Äôest le notaire num√©rique du peuple : il
                            applique nos d√©cisions collectives automatiquement, sans interm√©diaires ni abus.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour l'historique du membre -->
    <div class="modal fade" id="modal-membre-historique" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Historique du membre</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="card card-body mb-3">
                        <ul class="nav nav-tabs" id="historique-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" data-bs-toggle="tab"
                                    href="#tab-decisions-historique">D√©cisions</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-adhesions-historique">Adh√©sions</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab"
                                    href="#tab-publications-historique">Publications</a>
                            </li>
                        </ul>
                        <div class="tab-content mt-3" id="historique-tab-content">
                            <div class="tab-pane fade show active" id="tab-decisions-historique">
                                <div class="table-responsive">
                                    <table class="table table-sm" id="table-decisions-historique">
                                        <thead>
                                            <tr>
                                                <th>Titre</th>
                                                <th>Type</th>
                                                <th>Vote</th>
                                                <th>Date</th>
                                                <th>Statut</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab-adhesions-historique">
                                <div class="table-responsive">
                                    <table class="table table-sm" id="table-adhesions-historique">
                                        <thead>
                                            <tr>
                                                <th>Type</th>
                                                <th>Date d√©but</th>
                                                <th>Date fin</th>
                                                <th>Statut</th>
                                                <th>Dur√©e</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab-publications-historique">
                                <div class="table-responsive">
                                    <table class="table table-sm" id="table-publications-historique">
                                        <thead>
                                            <tr>
                                                <th>Titre</th>
                                                <th>Type</th>
                                                <th>Date</th>
                                                <th>Statut</th>
                                                <th>Vues</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Manifeste -->
    <div class="modal fade" id="manifesteModal" tabindex="-1" aria-labelledby="manifesteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="manifesteModalLabel">Manifeste</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <div class="card card-body mb-3">
                        <p>La Re-Publique Kw√©bec vise l'ind√©pendance, la transparence, la s√©curit√© des donn√©es et
                            l'accessibilit√© pour
                            tous les souverains. D√©couvrez notre vision et nos engagements dans le manifeste complet.
                        </p>

                        <h4>Manifeste ‚Äî Re-Publique Kw√©bec</h4>
                        <p>Ch√®res membres de l'Association Re-Publique Kw√©bec,</p>
                        <p>Nous avons le plaisir de vous annoncer un changement important et symbolique pour notre
                            mouvement. √Ä partir
                            d'aujourd'hui, nous adoptons officiellement le nom <strong>Re-Publique Kw√©bec</strong>. Ce
                            changement est
                            motiv√© par notre d√©sir de renforcer notre identit√© unique, de moderniser notre langage, et
                            de souligner le
                            symbolisme profond qui accompagne notre vision.</p>

                        <p>Le changement de nom s‚Äôinscrit dans notre d√©marche de reprogrammation positive de notre
                            langage. Tout comme
                            nous rempla√ßons les termes n√©gatifs par des mots qui √©voquent la coop√©ration et l‚Äôunit√©, le
                            passage √† "Kw√©bec"
                            refl√®te notre volont√© de moderniser et d‚Äôharmoniser notre communication. Ce geste
                            linguistique renforce notre
                            mission de cr√©er un environnement o√π chaque mot porte un sens constructif et positif.</p>

                        <p>Le nouveau nom, <strong>Re-Publique Kw√©bec</strong>, marque notre distinction par rapport √†
                            la province du
                            Qu√©bec telle qu‚Äôelle est commun√©ment connue. En choisissant "Kw√©bec", nous affirmons notre
                            autonomie et notre
                            volont√© de cr√©er une soci√©t√© parall√®le, ind√©pendante et libre des structures √©tatiques et
                            corporatives
                            actuelles.</p>

                        <p><strong>Re-Publique Kw√©bec : Notre Salut, Notre Libert√©</strong></p>

                        <p>En innu, le mot Kw√© signifie ¬´ Salut ! ¬ª, une formule d‚Äôaccueil simple, directe et
                            fraternelle.
                            En ce dissociant de Qu√©bec, nous affirmons une identit√© renouvel√©e, une r√©publique vivante
                            qui s‚Äôancre dans
                            l‚Äôhistoire et l‚Äôavenir.</p>

                        <p class="lead">üëâ Re-Publique Kw√©bec : Notre Salut, Notre Libert√©</p>

                        <p>Ce n‚Äôest pas seulement un nom, mais une d√©claration :</p>

                        <p><em>Notre salut est notre libert√©.</em></p>

                        <p>Chaque salut √©chang√© est un acte de reconnaissance entre hommes et femmes vivants libres.</p>

                        <p>C‚Äôest un signe d‚Äôunit√©, d‚Äôind√©pendance et de souverainet√©.</p>

                        <p>Ainsi, Re-Publique Kw√©bec devient plus qu‚Äôun mot.
                            C‚Äôest un appel, un slogan et un serment collectif port√© par le peuple :</p>

                        <p class="text-center">‚ú® <strong>Notre Salut, Notre Libert√©.</strong></p>

                        <p>Pour aller plus loin, d√©couvrez nos th√®mes majeurs ou participez d√®s maintenant.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Profil public -->
    <div class="modal fade" id="profilModal" tabindex="-1" aria-labelledby="profilModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="profilModalLabel">Profil public</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                </div>
                <div class="modal-body">
                    <div id="profil-public" class="card card-body">
                        <p>Consultez le profil public d'un membre, ses biens enregistr√©s et ses documents.</p>
                        <input type="text" class="form-control mb-2" id="profil-search" placeholder="Nom du membre">
                        <button class="btn btn-outline-info btn-sm" id="btn-search-profil">Rechercher</button>
                        <div id="profil-result" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Core scripts (Bootstrap bundle) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Project scripts -->
    <script src="/static/RepubliqueduKwebec/rdkq.js"></script>
    <script src="/static/democratie.js"></script>

    <!-- M√©diath√®que Modal Script -->
    <script>
        // Fonction pour charger la m√©diath√®que dans la modale
        async function loadMediathequeModal() {
            const mediaList = document.getElementById('mediatheque-list');

            try {
                // Afficher un loader
                mediaList.innerHTML = '<div class="col-12 text-center"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Chargement...</span></div></div>';

                const response = await fetch('/rdkq/mediatheque');
                const medias = await response.json();

                if (medias && medias.length > 0) {
                    displayMediasInModal(medias);
                } else {
                    mediaList.innerHTML = '<div class="col-12 text-center"><p class="text-muted">Aucun m√©dia disponible pour le moment.</p></div>';
                }
            } catch (error) {
                console.error('Erreur lors du chargement de la m√©diath√®que:', error);
                mediaList.innerHTML = '<div class="col-12 text-center"><p class="text-danger">Erreur lors du chargement des m√©dias.</p></div>';
            }
        }

        function displayMediasInModal(medias) {
            const mediaList = document.getElementById('mediatheque-list');
            let html = '';

            medias.forEach(media => {
                const imageUrl = media.img || '/static/image/default-media.png';
                const documentUrl = media.src || '#';
                const views = media.views || 0;
                const category = media.category || '';
                const author = media.author || 'Anonyme';

                html += `
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card h-100" style="background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
                            <img src="${imageUrl}" class="card-img-top" alt="${media.title}" style="height: 200px; object-fit: cover;" onerror="this.src='/static/image/default-media.png'">
                            <div class="card-body d-flex flex-column">
                                <h6 class="card-title text-white">${media.title}</h6>
                                <p class="card-text text-light small">${media.desc || ''}</p>
                                <div class="mt-auto">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span class="badge bg-secondary">${category}</span>
                                        <small class="text-muted">${views} vues</small>
                                    </div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <small class="text-muted">Par ${author}</small>
                                        ${documentUrl !== '#' ? `<a href="${documentUrl}" target="_blank" class="btn btn-primary btn-sm" onclick="incrementViews(${media.id})">Voir</a>` : '<span class="text-muted">Bient√¥t disponible</span>'}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            mediaList.innerHTML = html;
        }

        // Fonction pour incr√©menter les vues
        async function incrementViews(mediaId) {
            try {
                await fetch(`/rdkq/mediatheque/${mediaId}/view`, {
                    method: 'POST'
                });
            } catch (error) {
                console.error('Erreur lors de l\'incr√©mentation des vues:', error);
            }
        }

        // Charger la m√©diath√®que quand la modale s'ouvre
        document.addEventListener('DOMContentLoaded', function () {
            const mediathequeModal = document.getElementById('mediathequeModal');
            if (mediathequeModal) {
                mediathequeModal.addEventListener('show.bs.modal', function () {
                    loadMediathequeModal();
                });
            }
        });
    </script>

    {% block scripts %}{% endblock %}
</body>

</html>